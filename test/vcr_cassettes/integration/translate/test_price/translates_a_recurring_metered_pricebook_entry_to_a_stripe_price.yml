---
http_interactions:
- request:
    method: post
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/sobjects/Product2
    body:
      encoding: UTF-8
      string: '{"Name":"REST Product2  2023-07-01T00:00:00+00:00","IsActive":true,"Description":"A
        great description","ProductCode":"EfxBsBKAsjaF0caCUQPWQYJ8h61G","SBQQ__SubscriptionPricing__c":"Fixed
        Price","SBQQ__SubscriptionType__c":"Renewable","SBQQ__SubscriptionTerm__c":1,"SBQQ__BillingFrequency__c":"Monthly"}'
    headers:
      User-Agent:
      - Faraday v2.4.0
      Content-Type:
      - application/json
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 201
      message: Created
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:31 GMT
      Set-Cookie:
      - BrowserId=WT_QtitLEe66URf_A4rOjw; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:31 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:31 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:31
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6675/5000000
      Location:
      - "/services/data/v58.0/sobjects/Product2/01t7e000009ALGVAA4"
      Content-Type:
      - application/json;charset=UTF-8
      Vary:
      - Accept-Encoding
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"id":"01t7e000009ALGVAA4","success":true,"errors":[]}'
  recorded_at: Wed, 26 Jul 2023 00:28:31 GMT
- request:
    method: get
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/query?q=Select%20Id%20from%20Pricebook2%20where%20IsStandard%20=%20true
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v2.4.0
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:32 GMT
      Set-Cookie:
      - BrowserId=WY-egCtLEe6tgD22BEDt6Q; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:32 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:32 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:32
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6673/5000000
      Content-Type:
      - application/json;charset=UTF-8
      Vary:
      - Accept-Encoding
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"totalSize":1,"done":true,"records":[{"attributes":{"type":"Pricebook2","url":"/services/data/v58.0/sobjects/Pricebook2/01s7e000002eLFEAA2"},"Id":"01s7e000002eLFEAA2"}]}'
  recorded_at: Wed, 26 Jul 2023 00:28:32 GMT
- request:
    method: post
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/sobjects/PricebookEntry
    body:
      encoding: UTF-8
      string: '{"Pricebook2Id":"01s7e000002eLFEAA2","Product2Id":"01t7e000009ALGVAA4","IsActive":true,"UnitPrice":120.0,"UseStandardPrice":false}'
    headers:
      User-Agent:
      - Faraday v2.4.0
      Content-Type:
      - application/json
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 201
      message: Created
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:32 GMT
      Set-Cookie:
      - BrowserId=WcTfRytLEe66URf_A4rOjw; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:32 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:32 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:32
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6676/5000000
      Location:
      - "/services/data/v58.0/sobjects/PricebookEntry/01u7e00000Isbb3AAB"
      Content-Type:
      - application/json;charset=UTF-8
      Vary:
      - Accept-Encoding
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"id":"01u7e00000Isbb3AAB","success":true,"errors":[]}'
  recorded_at: Wed, 26 Jul 2023 00:28:32 GMT
- request:
    method: patch
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/sobjects/Product2/01t7e000009ALGVAA4
    body:
      encoding: UTF-8
      string: '{"SBQQ__BillingType__c":"Arrears"}'
    headers:
      User-Agent:
      - Faraday v2.4.0
      Content-Type:
      - application/json
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 204
      message: No Content
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:32 GMT
      Set-Cookie:
      - BrowserId=Wf_FMitLEe6I8e3G9iil8g; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:32 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:32 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:32
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Content-Security-Policy:
      - upgrade-insecure-requests
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6675/5000000
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Wed, 26 Jul 2023 00:28:32 GMT
- request:
    method: get
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/sobjects/PricebookEntry/01u7e00000Isbb3AAB
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v2.4.0
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:33 GMT
      Set-Cookie:
      - BrowserId=Wk6ByytLEe6ls-FujWWHsg; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:33 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:33 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:33
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6677/5000000
      Last-Modified:
      - Wed, 26 Jul 2023 00:28:32 GMT
      Content-Type:
      - application/json;charset=UTF-8
      Vary:
      - Accept-Encoding
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"attributes":{"type":"PricebookEntry","url":"/services/data/v58.0/sobjects/PricebookEntry/01u7e00000Isbb3AAB"},"Id":"01u7e00000Isbb3AAB","Name":"REST
        Product2  2023-07-01T00:00:00+00:00","Pricebook2Id":"01s7e000002eLFEAA2","Product2Id":"01t7e000009ALGVAA4","UnitPrice":120.0,"IsActive":true,"UseStandardPrice":false,"CreatedDate":"2023-07-26T00:28:32.000+0000","CreatedById":"0057e00000VZBcyAAH","LastModifiedDate":"2023-07-26T00:28:32.000+0000","LastModifiedById":"0057e00000VZBcyAAH","SystemModstamp":"2023-07-26T00:28:32.000+0000","ProductCode":"EfxBsBKAsjaF0caCUQPWQYJ8h61G","IsDeleted":false,"IsArchived":false,"Stripe_ID__c":null,"Test_Decimal_Field__c":null,"Test_String_Field__c":null,"Stripe_Dashboard_Link__c":"https://dashboard.stripe.com/test/id/"}'
  recorded_at: Wed, 26 Jul 2023 00:28:33 GMT
- request:
    method: post
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/apexrest/batchApi
    body:
      encoding: UTF-8
      string: '{"product2_ids":["01t7e000009ALGVAA4"]}'
    headers:
      User-Agent:
      - Faraday v2.4.0
      Content-Type:
      - application/json
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:33 GMT
      Set-Cookie:
      - BrowserId=WoSFxitLEe6V949skxVdmg; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:33 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:33 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:33
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Content-Type:
      - application/json
      Vary:
      - Accept-Encoding
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"records":[{"PricebookEntries":["01t7e000009ALGVAA4"],"Stripe_Dashboard_Link__c":"https://dashboard.stripe.com/test/id/","SBQQ__Taxable__c":false,"SBQQ__SubscriptionType__c":"Renewable","SBQQ__SubscriptionTerm__c":1,"SBQQ__SubscriptionPricing__c":"Fixed
        Price","SBQQ__SubscriptionBase__c":"List","SBQQ__ReconfigurationDisabled__c":false,"SBQQ__QuantityEditable__c":true,"SBQQ__PricingMethod__c":"List","SBQQ__PricingMethodEditable__c":false,"SBQQ__PriceEditable__c":false,"SBQQ__Optional__c":false,"SBQQ__OptionSelectionMethod__c":"Click","SBQQ__NonPartnerDiscountable__c":false,"SBQQ__NonDiscountable__c":false,"SBQQ__NewQuoteGroup__c":false,"SBQQ__IncludeInMaintenance__c":false,"SBQQ__HidePriceInSearchResults__c":false,"SBQQ__Hidden__c":false,"SBQQ__HasConsumptionSchedule__c":false,"SBQQ__HasConfigurationAttributes__c":false,"SBQQ__ExternallyConfigurable__c":false,"SBQQ__ExcludeFromOpportunity__c":false,"SBQQ__ExcludeFromMaintenance__c":false,"SBQQ__EnableLargeConfiguration__c":false,"SBQQ__DescriptionLocked__c":false,"SBQQ__DefaultQuantity__c":1.00000,"SBQQ__CustomConfigurationRequired__c":false,"SBQQ__CostEditable__c":false,"SBQQ__Component__c":false,"SBQQ__BlockPricingField__c":"Quantity","SBQQ__BillingType__c":"Arrears","SBQQ__BillingFrequency__c":"Monthly","SBQQ__AssetConversion__c":"One
        per quote line","SBQQ__AssetAmendmentBehavior__c":"Default","IsArchived":false,"IsDeleted":false,"SystemModstamp":"2023-07-26T00:28:32.000+0000","LastModifiedById":"0057e00000VZBcyAAH","LastModifiedDate":"2023-07-26T00:28:32.000+0000","CreatedById":"0057e00000VZBcyAAH","CreatedDate":"2023-07-26T00:28:31.000+0000","IsActive":true,"Description":"A
        great description","ProductCode":"EfxBsBKAsjaF0caCUQPWQYJ8h61G","Name":"REST
        Product2  2023-07-01T00:00:00+00:00","Id":"01t7e000009ALGVAA4","attributes":{"url":"/services/data/v58.0/sobjects/Product2/01t7e000009ALGVAA4","type":"Product2"}},{"Stripe_Dashboard_Link__c":"https://dashboard.stripe.com/test/id/","IsArchived":false,"IsDeleted":false,"ProductCode":"EfxBsBKAsjaF0caCUQPWQYJ8h61G","SystemModstamp":"2023-07-26T00:28:32.000+0000","LastModifiedById":"0057e00000VZBcyAAH","LastModifiedDate":"2023-07-26T00:28:32.000+0000","CreatedById":"0057e00000VZBcyAAH","CreatedDate":"2023-07-26T00:28:32.000+0000","UseStandardPrice":false,"IsActive":true,"UnitPrice":120.00,"Product2Id":"01t7e000009ALGVAA4","Pricebook2Id":"01s7e000002eLFEAA2","Name":"REST
        Product2  2023-07-01T00:00:00+00:00","Id":"01u7e00000Isbb3AAB","attributes":{"url":"/services/data/v58.0/sobjects/PricebookEntry/01u7e00000Isbb3AAB","type":"PricebookEntry"}}],"errors":[]}'
  recorded_at: Wed, 26 Jul 2023 00:28:33 GMT
- request:
    method: post
    uri: https://api.stripe.com/v1/products
    body:
      encoding: UTF-8
      string: name=REST+Product2++2023-07-01T00%3A00%3A00%2B00%3A00&description=A+great+description&metadata[salesforce_product2_id]=01t7e000009ALGVAA4&metadata[salesforce_product2_link]=https%3A%2F%2Fability-innovation-7335-dev-ed.scratch.my.salesforce.com%2F01t7e000009ALGVAA4
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer <STRIPE_API_KEY>
      Content-Type:
      - application/x-www-form-urlencoded
      Idempotency-Key:
      - 3ab3ec06-3e61-4c70-85a1-d528a13a293d
      Stripe-Version:
      - '2020-08-27'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"2.7.6 p219 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        st-rish2 22.5.0 Darwin Kernel Version 22.5.0: Thu Jun  8 22:22:20 PDT 2023;
        root:xnu-8796.121.3~7/RELEASE_ARM64_T6000 arm64","hostname":"st-rish2"}'
      Stripe-Account:
      - "<STRIPE_MERCHANT_ID>"
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Wed, 26 Jul 2023 00:28:34 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '751'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Idempotency-Key:
      - 3ab3ec06-3e61-4c70-85a1-d528a13a293d
      Original-Request:
      - req_ZWMpUMH0VvsQMO
      Request-Id:
      - req_ZWMpUMH0VvsQMO
      Stripe-Account:
      - "<STRIPE_MERCHANT_ID>"
      Stripe-Should-Retry:
      - 'false'
      Stripe-Version:
      - '2020-08-27'
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "prod_OKamMaVYsl1hmB",
          "object": "product",
          "active": true,
          "attributes": [],
          "created": 1690331314,
          "default_price": null,
          "description": "A great description",
          "identifiers": {},
          "images": [],
          "livemode": false,
          "metadata": {
            "salesforce_product2_id": "01t7e000009ALGVAA4",
            "salesforce_product2_link": "https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/01t7e000009ALGVAA4"
          },
          "name": "REST Product2  2023-07-01T00:00:00+00:00",
          "package_dimensions": null,
          "product_class": null,
          "shippable": null,
          "sku": "rest-product2--2023-07-01t0000000000-196",
          "statement_descriptor": null,
          "tax_code": null,
          "type": "service",
          "unit_label": null,
          "updated": 1690331314,
          "url": null
        }
  recorded_at: Wed, 26 Jul 2023 00:28:34 GMT
- request:
    method: patch
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/sobjects/Product2/01t7e000009ALGVAA4
    body:
      encoding: UTF-8
      string: '{"Stripe_ID__c":"prod_OKamMaVYsl1hmB"}'
    headers:
      User-Agent:
      - Faraday v2.4.0
      Content-Type:
      - application/json
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 204
      message: No Content
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:34 GMT
      Set-Cookie:
      - BrowserId=Ww2MIytLEe6ls-FujWWHsg; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:34 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:34 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:34
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Content-Security-Policy:
      - upgrade-insecure-requests
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6678/5000000
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Wed, 26 Jul 2023 00:28:34 GMT
- request:
    method: get
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/query?q=SELECT%20Id%0AFROM%20ProductConsumptionSchedule%0AWHERE%20ProductId%20=%20%2701t7e000009ALGVAA4%27%0A
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v2.4.0
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:35 GMT
      Set-Cookie:
      - BrowserId=W199FCtLEe64Eom7eddLeQ; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:35 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:35 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:35
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6671/5000000
      Content-Type:
      - application/json;charset=UTF-8
      Vary:
      - Accept-Encoding
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"totalSize":0,"done":true,"records":[]}'
  recorded_at: Wed, 26 Jul 2023 00:28:35 GMT
- request:
    method: get
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/query?q=SELECT%20Id%0AFROM%20ProductConsumptionSchedule%0AWHERE%20ProductId%20=%20%2701t7e000009ALGVAA4%27%0A
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v2.4.0
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:35 GMT
      Set-Cookie:
      - BrowserId=W5dVoytLEe6tgD22BEDt6Q; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:35 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:35 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:35
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6674/5000000
      Content-Type:
      - application/json;charset=UTF-8
      Vary:
      - Accept-Encoding
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"totalSize":0,"done":true,"records":[]}'
  recorded_at: Wed, 26 Jul 2023 00:28:35 GMT
- request:
    method: get
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/sobjects/Product2/01t7e000009ALGVAA4
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v2.4.0
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:35 GMT
      Set-Cookie:
      - BrowserId=W8v6OCtLEe6ls-FujWWHsg; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:35 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:35 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:35
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6679/5000000
      Last-Modified:
      - Wed, 26 Jul 2023 00:28:34 GMT
      Content-Type:
      - application/json;charset=UTF-8
      Vary:
      - Accept-Encoding
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"attributes":{"type":"Product2","url":"/services/data/v58.0/sobjects/Product2/01t7e000009ALGVAA4"},"Id":"01t7e000009ALGVAA4","Name":"REST
        Product2  2023-07-01T00:00:00+00:00","ProductCode":"EfxBsBKAsjaF0caCUQPWQYJ8h61G","Description":"A
        great description","IsActive":true,"CreatedDate":"2023-07-26T00:28:31.000+0000","CreatedById":"0057e00000VZBcyAAH","LastModifiedDate":"2023-07-26T00:28:34.000+0000","LastModifiedById":"0057e00000VZBcyAAH","SystemModstamp":"2023-07-26T00:28:34.000+0000","Family":null,"IsSerialized":false,"ExternalDataSourceId":null,"ExternalId":null,"DisplayUrl":null,"QuantityUnitOfMeasure":null,"IsDeleted":false,"IsArchived":false,"LastViewedDate":null,"LastReferencedDate":null,"StockKeepingUnit":null,"SBQQ__AssetAmendmentBehavior__c":"Default","SBQQ__AssetConversion__c":"One
        per quote line","SBQQ__BatchQuantity__c":null,"SBQQ__BillingFrequency__c":"Monthly","SBQQ__BillingType__c":"Arrears","SBQQ__BlockPricingField__c":"Quantity","SBQQ__ChargeType__c":null,"SBQQ__Component__c":false,"SBQQ__CompoundDiscountRate__c":null,"SBQQ__ConfigurationFieldSet__c":null,"SBQQ__ConfigurationFields__c":null,"SBQQ__ConfigurationFormTitle__c":null,"SBQQ__ConfigurationType__c":null,"SBQQ__ConfigurationValidator__c":null,"SBQQ__ConfiguredCodePattern__c":null,"SBQQ__ConfiguredDescriptionPattern__c":null,"SBQQ__CostEditable__c":false,"SBQQ__CostSchedule__c":null,"SBQQ__CustomConfigurationPage__c":null,"SBQQ__CustomConfigurationRequired__c":false,"SBQQ__CustomerCommunityAvailability__c":null,"SBQQ__DefaultPricingTable__c":null,"SBQQ__DefaultQuantity__c":1.0,"SBQQ__DescriptionLocked__c":false,"SBQQ__DiscountCategory__c":null,"SBQQ__DiscountSchedule__c":null,"SBQQ__DynamicPricingConstraint__c":null,"SBQQ__EnableLargeConfiguration__c":false,"SBQQ__ExcludeFromMaintenance__c":false,"SBQQ__ExcludeFromOpportunity__c":false,"SBQQ__ExternallyConfigurable__c":false,"SBQQ__GenerateContractedPrice__c":null,"SBQQ__HasConfigurationAttributes__c":false,"SBQQ__HasConsumptionSchedule__c":false,"SBQQ__Hidden__c":false,"SBQQ__HidePriceInSearchResults__c":false,"SBQQ__IncludeInMaintenance__c":false,"SBQQ__NewQuoteGroup__c":false,"SBQQ__NonDiscountable__c":false,"SBQQ__NonPartnerDiscountable__c":false,"SBQQ__OptionLayout__c":null,"SBQQ__OptionSelectionMethod__c":"Click","SBQQ__Optional__c":false,"SBQQ__PriceEditable__c":false,"SBQQ__PricingGuidance__c":null,"SBQQ__PricingMethodEditable__c":false,"SBQQ__PricingMethod__c":"List","SBQQ__ProductPictureID__c":null,"SBQQ__QuantityEditable__c":true,"SBQQ__QuantityScale__c":null,"SBQQ__ReconfigurationDisabled__c":false,"SBQQ__RenewalProduct__c":null,"SBQQ__SortOrder__c":null,"SBQQ__Specifications__c":null,"SBQQ__SubscriptionBase__c":"List","SBQQ__SubscriptionCategory__c":null,"SBQQ__SubscriptionPercent__c":null,"SBQQ__SubscriptionPricing__c":"Fixed
        Price","SBQQ__SubscriptionTarget__c":null,"SBQQ__SubscriptionTerm__c":1.0,"SBQQ__SubscriptionType__c":"Renewable","SBQQ__TaxCode__c":null,"SBQQ__Taxable__c":false,"SBQQ__TermDiscountLevel__c":null,"SBQQ__TermDiscountSchedule__c":null,"SBQQ__UpgradeCredit__c":null,"SBQQ__UpgradeRatio__c":null,"SBQQ__UpgradeSource__c":null,"SBQQ__UpgradeTarget__c":null,"SBQQ__ConfigurationEvent__c":null,"Stripe_ID__c":"prod_OKamMaVYsl1hmB","Stripe_Dashboard_Link__c":"https://dashboard.stripe.com/test/id/prod_OKamMaVYsl1hmB"}'
  recorded_at: Wed, 26 Jul 2023 00:28:35 GMT
- request:
    method: post
    uri: https://api.stripe.com/v1/prices
    body:
      encoding: UTF-8
      string: currency=usd&unit_amount_decimal=12000.0&recurring[interval_count]=1&recurring[usage_type]=metered&recurring[aggregate_usage]=last_during_period&recurring[interval]=month&product=prod_OKamMaVYsl1hmB&metadata[salesforce_pricebook_entry_id]=01u7e00000Isbb3AAB&metadata[salesforce_pricebook_entry_link]=https%3A%2F%2Fability-innovation-7335-dev-ed.scratch.my.salesforce.com%2F01u7e00000Isbb3AAB
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer <STRIPE_API_KEY>
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_ZWMpUMH0VvsQMO","request_duration_ms":255}}'
      Idempotency-Key:
      - 4bf3ce74-50b4-42ba-93ce-a672b5b4aa4a
      Stripe-Version:
      - '2020-08-27'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"2.7.6 p219 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        st-rish2 22.5.0 Darwin Kernel Version 22.5.0: Thu Jun  8 22:22:20 PDT 2023;
        root:xnu-8796.121.3~7/RELEASE_ARM64_T6000 arm64","hostname":"st-rish2"}'
      Stripe-Account:
      - "<STRIPE_MERCHANT_ID>"
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Wed, 26 Jul 2023 00:28:36 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '837'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Idempotency-Key:
      - 4bf3ce74-50b4-42ba-93ce-a672b5b4aa4a
      Original-Request:
      - req_ycasaRzql9pEDR
      Request-Id:
      - req_ycasaRzql9pEDR
      Stripe-Account:
      - "<STRIPE_MERCHANT_ID>"
      Stripe-Should-Retry:
      - 'false'
      Stripe-Version:
      - '2020-08-27'
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "price_1NXvahIsgf92XbAOPGnNj2JG",
          "object": "price",
          "active": true,
          "billing_scheme": "per_unit",
          "created": 1690331315,
          "currency": "usd",
          "custom_unit_amount": null,
          "livemode": false,
          "lookup_key": null,
          "metadata": {
            "salesforce_pricebook_entry_id": "01u7e00000Isbb3AAB",
            "salesforce_pricebook_entry_link": "https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/01u7e00000Isbb3AAB"
          },
          "nickname": null,
          "product": "prod_OKamMaVYsl1hmB",
          "recurring": {
            "aggregate_usage": "last_during_period",
            "interval": "month",
            "interval_count": 1,
            "trial_period_days": null,
            "usage_type": "metered"
          },
          "tax_behavior": "unspecified",
          "tiers_mode": null,
          "transform_quantity": null,
          "type": "recurring",
          "unit_amount": 12000,
          "unit_amount_decimal": "12000"
        }
  recorded_at: Wed, 26 Jul 2023 00:28:36 GMT
- request:
    method: patch
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/sobjects/PricebookEntry/01u7e00000Isbb3AAB
    body:
      encoding: UTF-8
      string: '{"Stripe_ID__c":"price_1NXvahIsgf92XbAOPGnNj2JG"}'
    headers:
      User-Agent:
      - Faraday v2.4.0
      Content-Type:
      - application/json
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 204
      message: No Content
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:36 GMT
      Set-Cookie:
      - BrowserId=XCbEXCtLEe66URf_A4rOjw; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:36 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:36 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:36
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Content-Security-Policy:
      - upgrade-insecure-requests
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6677/5000000
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Wed, 26 Jul 2023 00:28:36 GMT
- request:
    method: patch
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/sobjects/Sync_Record__c/Compound_ID__c/01u7e00000Isbb3AAB-01u7e00000Isbb3AAB
    body:
      encoding: UTF-8
      string: '{"Primary_Record_ID__c":"01u7e00000Isbb3AAB","Primary_Object_Type__c":"PricebookEntry","Secondary_Record_ID__c":"01u7e00000Isbb3AAB","Secondary_Object_Type__c":"PricebookEntry","Resolution_Message__c":"Sync
        Successful, created Stripe Price Object with ID: price_1NXvahIsgf92XbAOPGnNj2JG","Resolution_Status__c":"Success"}'
    headers:
      User-Agent:
      - Faraday v2.4.0
      Content-Type:
      - application/json
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 201
      message: Created
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:36 GMT
      Set-Cookie:
      - BrowserId=XGQb7StLEe64Eom7eddLeQ; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:36 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:36 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:36
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6672/5000000
      Location:
      - "/services/data/v58.0/sobjects/Sync_Record__c/a1W7e000002Go1zEAC"
      Content-Type:
      - application/json;charset=UTF-8
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"id":"a1W7e000002Go1zEAC","success":true,"errors":[],"created":true}'
  recorded_at: Wed, 26 Jul 2023 00:28:36 GMT
- request:
    method: get
    uri: https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/services/data/v58.0/sobjects/PricebookEntry/01u7e00000Isbb3AAB
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v2.4.0
      Authorization:
      - OAuth <SALESFORCE_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 26 Jul 2023 00:28:37 GMT
      Set-Cookie:
      - BrowserId=XKKEGCtLEe66URf_A4rOjw; domain=.salesforce.com; path=/; expires=Thu,
        25-Jul-2024 00:28:37 GMT; Max-Age=31536000
      - CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:37 GMT; Max-Age=31536000
      - LSKey-c$CookieConsentPolicy=0:1; path=/; expires=Thu, 25-Jul-2024 00:28:37
        GMT; Max-Age=31536000
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      X-Robots-Tag:
      - none
      Cache-Control:
      - no-cache,must-revalidate,max-age=0,no-store,private
      Sforce-Limit-Info:
      - api-usage=6678/5000000
      Last-Modified:
      - Wed, 26 Jul 2023 00:28:36 GMT
      Content-Type:
      - application/json;charset=UTF-8
      Vary:
      - Accept-Encoding
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"attributes":{"type":"PricebookEntry","url":"/services/data/v58.0/sobjects/PricebookEntry/01u7e00000Isbb3AAB"},"Id":"01u7e00000Isbb3AAB","Name":"REST
        Product2  2023-07-01T00:00:00+00:00","Pricebook2Id":"01s7e000002eLFEAA2","Product2Id":"01t7e000009ALGVAA4","UnitPrice":120.0,"IsActive":true,"UseStandardPrice":false,"CreatedDate":"2023-07-26T00:28:32.000+0000","CreatedById":"0057e00000VZBcyAAH","LastModifiedDate":"2023-07-26T00:28:36.000+0000","LastModifiedById":"0057e00000VZBcyAAH","SystemModstamp":"2023-07-26T00:28:36.000+0000","ProductCode":"EfxBsBKAsjaF0caCUQPWQYJ8h61G","IsDeleted":false,"IsArchived":false,"Stripe_ID__c":"price_1NXvahIsgf92XbAOPGnNj2JG","Test_Decimal_Field__c":null,"Test_String_Field__c":null,"Stripe_Dashboard_Link__c":"https://dashboard.stripe.com/test/id/price_1NXvahIsgf92XbAOPGnNj2JG"}'
  recorded_at: Wed, 26 Jul 2023 00:28:37 GMT
- request:
    method: get
    uri: https://api.stripe.com/v1/prices/price_1NXvahIsgf92XbAOPGnNj2JG
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer <STRIPE_API_KEY>
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_ycasaRzql9pEDR","request_duration_ms":222}}'
      Stripe-Version:
      - '2020-08-27'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"2.7.6 p219 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        st-rish2 22.5.0 Darwin Kernel Version 22.5.0: Thu Jun  8 22:22:20 PDT 2023;
        root:xnu-8796.121.3~7/RELEASE_ARM64_T6000 arm64","hostname":"st-rish2"}'
      Stripe-Account:
      - "<STRIPE_MERCHANT_ID>"
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Wed, 26 Jul 2023 00:28:37 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '837'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Request-Id:
      - req_q1vANUt78gKvrI
      Stripe-Account:
      - "<STRIPE_MERCHANT_ID>"
      Stripe-Version:
      - '2020-08-27'
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "price_1NXvahIsgf92XbAOPGnNj2JG",
          "object": "price",
          "active": true,
          "billing_scheme": "per_unit",
          "created": 1690331315,
          "currency": "usd",
          "custom_unit_amount": null,
          "livemode": false,
          "lookup_key": null,
          "metadata": {
            "salesforce_pricebook_entry_id": "01u7e00000Isbb3AAB",
            "salesforce_pricebook_entry_link": "https://ability-innovation-7335-dev-ed.scratch.my.salesforce.com/01u7e00000Isbb3AAB"
          },
          "nickname": null,
          "product": "prod_OKamMaVYsl1hmB",
          "recurring": {
            "aggregate_usage": "last_during_period",
            "interval": "month",
            "interval_count": 1,
            "trial_period_days": null,
            "usage_type": "metered"
          },
          "tax_behavior": "unspecified",
          "tiers_mode": null,
          "transform_quantity": null,
          "type": "recurring",
          "unit_amount": 12000,
          "unit_amount_decimal": "12000"
        }
  recorded_at: Wed, 26 Jul 2023 00:28:37 GMT
recorded_with: VCR 6.2.0
